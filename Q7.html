<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>題目七：加減計數器(進階)</title>
    <link rel="stylesheet" href="./css/style.css">
</head>

<body>
    <h2>題目七：加減計數器(進階)</h2>
    <p>接續題目六，請製作並監聽一個表單，讓用戶可以修改一次增加與減少的數量。</p>
    //
    <ul>
        <li>目前數字：<span class="nowTotal">0</span>，目前基礎：<span class="nowCount">0</span></li> // 按按鈕 +1
        <li><button class="add1">+1</button></li> // 按按鈕 +1
        <li><button class="reset">Reset</button></li> // 按按鈕重設為 0
        <li><button class="minus1">-1</button></li> // 按按鈕 -1
    </ul>
    <form>
        <input type="number" class="counterMultiplier" min="0" name="counterMultiplier" placeholder="請輸入計數器要乘多少倍"
            value="1" required>
        <input type="submit" value="提交倍數">
    </form>
    <pre class="prettyprint">
    &lt;form&gt;
        &lt;input type=&quot;number&quot; min=&quot;0&quot; name=&quot;counterMultiplier&quot; placeholder=&quot;請輸入計數器要乘多少倍&quot; required&gt;
        &lt;input type=&quot;submit&quot; value=&quot;提交倍數&quot;&gt;
    &lt;/form&gt;
    </pre>

    <h2>回答:</h2>
    <pre class="prettyprint">
        const nowCount = document.querySelector('.nowCount');
        const nowTotal = document.querySelector('.nowTotal');

        const add1 = document.querySelector('.add1');
        const reset = document.querySelector('.reset');
        const minus1 = document.querySelector('.minus1');

        const form = document.querySelector("form");
        const counterMultiplier = document.querySelector('.counterMultiplier');

        let count = 0;
        add1.addEventListener("click", function () {
            ++count;
            toTotal();
        });
        reset.addEventListener("click", function () {
            count = 0;
            toTotal();
        });
        minus1.addEventListener("click", function () {
            --count;
            toTotal();
        });

        form.addEventListener("submit", (e) => {
            toTotal();
            e.preventDefault();           
        });

        function toTotal() {
            const cm = counterMultiplier.value;       
            if (isNaN(cm)) {
                window.alert('倍率有錯!!');
            }
            nowCount.textContent = count;
            nowTotal.textContent = count * parseInt(cm);
        }
    </pre>

    <script>
        const nowCount = document.querySelector('.nowCount');
        const nowTotal = document.querySelector('.nowTotal');

        const add1 = document.querySelector('.add1');
        const reset = document.querySelector('.reset');
        const minus1 = document.querySelector('.minus1');

        const form = document.querySelector("form");
        const counterMultiplier = document.querySelector('.counterMultiplier');

        let count = 0;
        add1.addEventListener("click", function () {
            ++count;
            toTotal();
        });
        reset.addEventListener("click", function () {
            count = 0;
            toTotal();
        });
        minus1.addEventListener("click", function () {
            --count;
            toTotal();
        });

        form.addEventListener("submit", (e) => {
            toTotal();
            e.preventDefault();           
        });

        function toTotal() {
            const cm = counterMultiplier.value;       
            if (isNaN(cm)) {
                window.alert('倍率有錯!!');
            }
            nowCount.textContent = count;
            nowTotal.textContent = count * parseInt(cm);
        }

    </script>

    <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
</body>

</html>